<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Interact Coin ‚Äì Servir √© Nosso Superpoder</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  html { scroll-behavior: smooth; }
  .fade-in { opacity: 0; transform: translateY(-10px); animation: fadeIn 1.2s ease forwards; }
  @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px);} to { opacity: 1; transform: translateY(0);} }
  .hidden { display:none; }
</style>
</head>
<body class="bg-gradient-to-b from-white via-indigo-50 to-indigo-100 text-gray-900">

  <!-- Alerta de erro -->
  <div id="errorBar" class="hidden bg-red-50 border border-red-200 text-red-700 px-4 py-3 text-sm">
    <strong>Ops!</strong> N√£o consegui carregar os dados do painel agora. Mostrando dados de exemplo. (Verifique o endpoint do Apps Script e as permiss√µes p√∫blicas.)
  </div>

  <!-- Cabe√ßalho -->
  <header class="bg-white shadow-lg sticky top-0 z-50">
    <div class="max-w-6xl mx-auto flex justify-between items-center p-4 fade-in">
      <div class="flex items-center space-x-3">
        <img src="https://drive.google.com/uc?export=view&id=1X-ZhbL82LkiyIJ6_RY7fhaDkOqhAM7O2" alt="Logo Interact Club de S√£o Paulo Butant√£" class="h-12" loading="eager">
        <span class="text-xl font-extrabold text-indigo-700">Interact Coin</span>
        <span class="text-xs px-2 py-1 rounded-full bg-indigo-100 text-indigo-700">beta</span>
      </div>
      <nav class="hidden md:flex space-x-6 text-sm font-medium">
        <a href="#o-que-e" class="hover:text-indigo-600">O que √©</a>
        <a href="#painel" class="hover:text-indigo-600">Painel</a>
        <a href="#participar" class="hover:text-indigo-600">Participar</a>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="text-center py-20 bg-gradient-to-b from-indigo-100 to-white fade-in">
    <h1 class="text-4xl md:text-5xl font-extrabold text-indigo-700 mb-4">J√° pensou em transformar suas horas de trabalho volunt√°rio em investimento na Funda√ß√£o Rot√°ria? ‚ö°</h1>
    <p class="max-w-2xl mx-auto text-lg text-gray-700 mb-6">O <strong>Interact Coin</strong> conecta o seu tempo, talento e energia a um prop√≥sito maior. Cada hora servida √© convertida em um impacto real ‚Äî um jeito moderno e divertido de viver o lema rot√°rio: <strong>Dar de si antes de pensar em si</strong>.</p>
    <div class="flex justify-center gap-3">
      <a href="#participar" class="bg-indigo-600 text-white px-6 py-3 rounded-full hover:bg-indigo-700">Quero participar</a>
      <a href="#painel" class="bg-white border border-indigo-200 text-indigo-700 px-6 py-3 rounded-full hover:bg-indigo-50">Ver painel</a>
    </div>
  </section>

  <!-- O que √© -->
  <section id="o-que-e" class="max-w-6xl mx-auto py-16 px-4 fade-in">
    <h2 class="text-3xl font-bold text-center text-indigo-700 mb-6">O que √© o Interact Coin?</h2>
    <p class="max-w-3xl mx-auto text-center text-gray-700 mb-6">
      O <strong>Interact Coin</strong> √© uma iniciativa criada pelo <strong>Interact Club de S√£o Paulo Butant√£</strong> para transformar o esp√≠rito de servir em uma corrente de generosidade real.
      A cada hora de trabalho volunt√°rio ou doa√ß√£o direta registrada, o clube destinar√° <strong>R$ 0,10</strong> ao <strong>Fundo Anual da Funda√ß√£o Rot√°ria</strong>.
      Quem participa n√£o paga absolutamente nada ‚Äî o investimento √© feito pelo pr√≥prio <strong>Interact Club de S√£o Paulo Butant√£</strong> como forma de valorizar o seu ato de servir. üíô
    </p>
    <p class="max-w-3xl mx-auto text-center text-gray-600">
      Assim, o que antes era apenas tempo doado, agora se transforma tamb√©m em recursos para projetos humanit√°rios, bolsas de estudo e a√ß√µes globais promovidas pela Funda√ß√£o Rot√°ria.
    </p>
  </section>

  <!-- Painel -->
  <section id="painel" class="max-w-6xl mx-auto py-16 px-4 fade-in">
    <h2 class="text-3xl font-bold text-center text-indigo-700 mb-4">Painel Interact Coin</h2>
    <div class="max-w-4xl mx-auto bg-white p-6 rounded-2xl shadow mb-10">
      <div class="grid md:grid-cols-2 gap-6 text-center">
        <div>
          <h3 class="text-lg font-semibold text-gray-600 mb-2">Total de Interact Coins</h3>
          <div id="coinsTotal" class="text-4xl font-extrabold text-indigo-700">0 Coins</div>
          <div id="coinsBRL" class="text-lg text-gray-700 mt-1">R$ 0,00</div>
        </div>
        <div>
          <h3 class="text-lg font-semibold text-gray-600 mb-2">Total de Horas de Voluntariado</h3>
          <div id="hoursTotal" class="text-4xl font-extrabold text-indigo-700">0h</div>
          <p class="text-sm text-gray-500 mt-1">Somando o tempo doado por todos os Interacts.</p>
        </div>
      </div>
      <p class="text-xs text-center text-gray-500 mt-6">1 Coin = R$ 0,10 (doado ao Fundo Anual da Funda√ß√£o Rot√°ria)</p>
    </div>

    <div class="grid md:grid-cols-2 gap-6 max-w-6xl mx-auto">
      <div class="bg-white p-6 rounded-2xl shadow">
        <h3 class="text-lg font-bold text-indigo-700 mb-4 text-center">üèÜ Top 5 Clubes com mais Interact Coins</h3>
        <canvas id="topClubsChart"></canvas>
      </div>
      <div class="bg-white p-6 rounded-2xl shadow">
        <h3 class="text-lg font-bold text-indigo-700 mb-4 text-center">üí™ Top 5 Pessoas com mais Interact Coins</h3>
        <canvas id="topPeopleChart"></canvas>
      </div>
    </div>
  </section>

  <!-- Formul√°rio -->
  <section id="participar" class="bg-indigo-600 text-white py-16 fade-in">
    <div class="max-w-4xl mx-auto px-4 text-center">
      <h2 class="text-3xl font-extrabold mb-3">Participe do Interact Coin üí†</h2>
      <p class="opacity-95 mb-6 max-w-2xl mx-auto">
        Preencha o formul√°rio abaixo e registre sua contribui√ß√£o. Voc√™ pode adicionar o link de uma foto p√∫blica do projeto (Instagram, Google Fotos ou Google Drive compartilh√°vel).
      </p>
      <form id="coinForm" class="bg-white text-gray-800 p-6 rounded-2xl shadow-md space-y-4 max-w-lg mx-auto">
        <input type="text" name="nome" placeholder="Nome completo" required class="w-full border p-2 rounded">
        <input type="text" name="clube" placeholder="Clube (Ex.: Interact Club de S√£o Paulo Butant√£)" required class="w-full border p-2 rounded">
        <input type="text" name="distrito" placeholder="Distrito (Ex.: 4563)" required class="w-full border p-2 rounded">
        <input type="number" name="horas" placeholder="Horas de voluntariado ou valor doado (R$)" step="0.1" required class="w-full border p-2 rounded">
        <input type="url" name="imagemURL" placeholder="Link da imagem do projeto (Instagram, Google Fotos, Drive...)" class="w-full border p-2 rounded">
        <button class="w-full bg-indigo-600 text-white p-3 rounded-lg hover:bg-indigo-700">Enviar registro</button>
      </form>
      <p class="mt-6 text-xs opacity-80">Transpar√™ncia total: registros aprovados pelo clube. Pequenas a√ß√µes, grandes resultados.</p>
    </div>
  </section>

  <footer class="bg-indigo-900 text-white py-8 text-center">
    <p>¬© 2025 Interact Coin ‚Äì feito por jovens que servem.</p>
    <p class="mt-2 opacity-80">Cada hora servida √© uma semente de transforma√ß√£o. üå±</p>
  </footer>

  <script>
    const API_URL = "https://script.google.com/macros/s/AKfycbyilsD4DMf1Rz4fKySBaETehXwckS2YjAZTATYMTt1f7DPs3jN1-EKL9_x7Vmeoctta7A/exec";
    const RATE = 0.10;

    async function updatePanel() {
      try {
        const res = await fetch(API_URL);
        const data = await res.json();
        document.getElementById("coinsTotal").textContent = `${data.totalCoins.toLocaleString('pt-BR')} Coins`;
        document.getElementById("coinsBRL").textContent = (data.totalCoins * RATE).toLocaleString('pt-BR', {style:'currency',currency:'BRL'});
        document.getElementById("hoursTotal").textContent = `${data.totalHoras.toLocaleString('pt-BR')}h`;

        new Chart(document.getElementById('topClubsChart'), {
          type: 'bar',
          data: {
            labels: data.topClubs.map(c => c.nome),
            datasets: [{ label: 'Interact Coins', data: data.topClubs.map(c => c.coins), backgroundColor: '#4f46e5' }]
          },
          options: { plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } }
        });

        new Chart(document.getElementById('topPeopleChart'), {
          type: 'bar',
          data: {
            labels: data.topPeople.map(p => p.nome),
            datasets: [{ label: 'Interact Coins', data: data.topPeople.map(p => p.coins), backgroundColor: '#818cf8' }]
          },
          options: { plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } }
        });
      } catch (err) {
        console.error('Erro ao carregar dados', err);
        document.getElementById('errorBar').classList.remove('hidden');
      }
    }

    document.getElementById("coinForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const formData = Object.fromEntries(new FormData(e.target).entries());
      try {
        const res = await fetch(API_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(formData)
        });
        const result = await res.json();
        if (result.ok) {
          alert("‚úÖ Registro enviado com sucesso!");
          e.target.reset();
          updatePanel();
        } else {
          alert("‚ùå N√£o foi poss√≠vel enviar. Verifique sua conex√£o ou permiss√µes.");
        }
      } catch (err) {
        alert("‚ùå N√£o foi poss√≠vel enviar. Verifique sua conex√£o ou permiss√µes.");
        console.error(err);
      }
    });

    document.addEventListener('DOMContentLoaded', updatePanel);
  </script>
</body>
</html>
